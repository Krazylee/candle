<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Candle by wong2</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>Candle</h1>
        <p>推送豆瓣阅读电子书到Kindle</p>

        <p class="view"><a href="https://github.com/wong2/candle">View the Project on GitHub <small>wong2/candle</small></a></p>


        <ul>
          <li><a href="https://github.com/wong2/candle/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/wong2/candle/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/wong2/candle">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>
        <p><img src="http://img3.douban.com/view/photo/photo/public/p2152409025.jpg" alt="candle"></p>

<h2>
<a name="%E8%B1%86%E7%93%A3%E9%98%85%E8%AF%BB%E6%8E%A8%E9%80%81%E5%88%B0kindle" class="anchor" href="#%E8%B1%86%E7%93%A3%E9%98%85%E8%AF%BB%E6%8E%A8%E9%80%81%E5%88%B0kindle"><span class="octicon octicon-link"></span></a>豆瓣阅读推送到Kindle</h2>

<p>这个项目包括两部分，浏览器扩展和服务器端</p>

<h3>
<a name="%E5%90%AF%E5%8A%A8%E6%9C%8D%E5%8A%A1" class="anchor" href="#%E5%90%AF%E5%8A%A8%E6%9C%8D%E5%8A%A1"><span class="octicon octicon-link"></span></a>启动服务</h3>

<ul>
<li>执行<code>git clone git@github.com:wong2/candle.git</code>得到这份代码</li>
<li>确保已安装<code>redis</code>且已启动<code>redis-server</code>
</li>
<li>下载<a href="http://www.amazon.com/gp/feature.html?ie=UTF8&amp;docId=1000765211">kindlegen</a>并将其加入PATH中，确保在终端可以执行<code>kindlegen</code>命令</li>
<li>进入<code>candle</code>目录，执行<code>[sudo] pip install -r requirements.txt</code>安装Python依赖</li>
<li>编辑<code>config.py</code>，填入你的邮箱服务的配置</li>
<li>执行<code>rqworker</code>开启worker</li>
<li>执行<code>python app.py</code>开启Flask的开发服务器</li>
<li>此时服务应该已经跑在<code>http://localhost:5000/send</code>了</li>
<li>然后你可以考虑把服务跑在Nginx等服务器上，比如搭配<a href="http://gunicorn.org/">Gunicorn</a>
</li>
</ul><h3>
<a name="%E6%B5%8F%E8%A7%88%E5%99%A8%E7%AB%AF" class="anchor" href="#%E6%B5%8F%E8%A7%88%E5%99%A8%E7%AB%AF"><span class="octicon octicon-link"></span></a>浏览器端</h3>

<ul>
<li>目前只有Chrome扩展</li>
<li>安装Chrome扩展，在设置页面设置好服务器地址和你的Kindle邮箱</li>
<li>在豆瓣阅读电子书阅读页面，点击地址栏里的<code>K</code>图标即可发送当前电子书到Kindle</li>
</ul><h3>
<a name="%E6%B3%A8%E6%84%8F" class="anchor" href="#%E6%B3%A8%E6%84%8F"><span class="octicon octicon-link"></span></a>注意</h3>

<ul>
<li>千万不要忘记去<code>Kindle个人文档设置</code><a href="https://www.amazon.cn/gp/digital/fiona/manage?ie=UTF8&amp;ref_=gno_yam_myk#pdocSettings">amazon.cn上</a>
/ <a href="https://www.amazon.com/gp/digital/fiona/manage?ie=UTF8&amp;ref_=gno_yam_myk#pdocSettings">amazon.com上</a>把使用的发送邮箱加入白名单</li>
</ul><h3>
<a name="%E6%8D%90%E5%8A%A9" class="anchor" href="#%E6%8D%90%E5%8A%A9"><span class="octicon octicon-link"></span></a>捐助</h3>

<ul>
<li>对你有帮助的话，请我喝罐青岛啤酒吧（只要￥4.5！）~ <a href="https://me.alipay.com/wong2">https://me.alipay.com/wong2</a>
</li>
</ul>
      </section>
      <footer>
        <p>This project is maintained by <a href="https://github.com/wong2">wong2</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>
    
  </body>
</html>